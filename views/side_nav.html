<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Side Nav</title>
    <style>
        *{margin:0;padding:0;}
        a{text-decoration:none;color:inherit;}
        ul{list-style:none;}
        .wrap{position:relative;}
        .gnb{position:fixed;left:0;top:0;height:60px;width:100%;background-color:#000;color:#fff;}
        section{display:flex;justify-content:center;align-items:center; height:100vh;width:100%;color:#000;font-size: 50px;font-weight:bold;text-transform: uppercase;}
        .menu_bar{height:3px;background-color:#fff;transition: .3s;}
        .gnb_nav{display:flex;width:100%;justify-content:space-between;box-sizing: border-box;padding:0 20%;}
        .gnb_nav>li{line-height:60px;font-size:15px;font-weight:bold;text-transform: uppercase;}
        .gnb_nav>li>a{display:block;padding:0 10px;height:100%;}
        .sec01{background-color:#fc0;}
        .sec02{background-color:#fa0;}
        .sec03{background-color:#faf;}
        .sec04{background-color:#0af;}
        .sec05{background-color:#0a0;}
        .side_nav{position:fixed;left:50px;top:50%;transform: translateY(-50%);}
        .lnb{display:inline-block;width:3px;height:200px;background-color: #000;}
        .icon{position:absolute;left:0;width:3px;height:40px;background-color: #fff;transition: .3s;}
    </style>
</head>
<body>
    <div class="wrap">
        <div class="gnb">
            <span class="menu_bar" style="position:absolute;bottom:0;"></span>
            <ul class="gnb_nav">
                <li class="menu01"><a href="#">menu01</a></li>
                <li class="menu02"><a href="#">menu02</a></li>
                <li class="menu03"><a href="#">menu03</a></li>
                <li class="menu04"><a href="#">menu04</a></li>
                <li class="menu04"><a href="#">menu05</a></li>
            </ul>
        </div>
        <div class="side_nav">
            <span class="icon" style="top:0px;"></span>
            <span class="lnb"></span>
        </div>
        <section class="sec01">section - 01</section>
        <section class="sec02">section - 02</section>
        <section class="sec03">section - 03</section>
        <section class="sec04">section - 04</section>
        <section class="sec05">section - 05</section>
    </div>
    <script>
        const wrap=document.querySelector('.wrap');
        let sectionArr =document.querySelectorAll('section');
        const icon_mark=document.querySelector('.icon');
        let bar = document.querySelector('.lnb');
        let curr;
        let sec01=document.querySelector('.sec01').offsetTop - window.innerHeight/2;
        let sec02=document.querySelector('.sec02').offsetTop - window.innerHeight/2;
        let sec03=document.querySelector('.sec03').offsetTop - window.innerHeight/2;
        let sec04=document.querySelector('.sec04').offsetTop - window.innerHeight/2;
        let sec05=document.querySelector('.sec05').offsetTop - window.innerHeight/2;
        let menuBar=document.querySelector('.menu_bar');
        const gnb=document.querySelector('.gnb_nav');
        let list=gnb.querySelectorAll('a');
        let barPos=list[0].offsetLeft;
        menuBar.style.width=list[0].offsetWidth+'px';
        menuBar.style.left=`${barPos}px`;
        window.addEventListener('resize',function(){
          sec01=document.querySelector('.sec01').offsetTop - window.innerHeight/2;
          sec02=document.querySelector('.sec02').offsetTop - window.innerHeight/2;
          sec03=document.querySelector('.sec03').offsetTop - window.innerHeight/2;
          sec04=document.querySelector('.sec04').offsetTop - window.innerHeight/2;
          sec05=document.querySelector('.sec05').offsetTop - window.innerHeight/2;
          posConfirm();
        });
        let posConfirm=function(){
          let wrapHeight=wrap.scrollHeight;  
          curr=window.scrollY;
          if(curr>=sec05){
              icon_mark.style.top='160px';
              menuBar.style.left=list[4].offsetLeft+'px';
          }else if(curr>=sec04){
              icon_mark.style.top='120px';
              menuBar.style.left=list[3].offsetLeft+'px';
          }else if(curr>=sec03){
              icon_mark.style.top='80px';
              menuBar.style.left=list[2].offsetLeft+'px';
          }else if(curr>=sec02){
              icon_mark.style.top='40px';
              menuBar.style.left=list[1].offsetLeft+'px';
          }else if(curr>=sec01){
              icon_mark.style.top='0px';
              menuBar.style.left=list[0].offsetLeft+'px';
          }
        }
        window.addEventListener('scroll', ()=>{
          posConfirm();
        });
        gnb.addEventListener('mouseover',(e)=>{
            let item=e.target;
            if(item.tagName=='A'){
                barPos=item.offsetLeft;
                menuBar.style.left=`${barPos}px`;
            }
        });
        gnb.addEventListener('mouseleave',(e)=>{
          posConfirm();
        });
    </script>
</body>
</html>